<ion-content [fullscreen]="true" color="light-back">
  <ion-card style="box-shadow: none;margin: 10% 0 0 0;">
    <ion-card-header>
      <img src="../../../../assets/logo.png" alt="Mechanic logo" class="logo">
      <ion-card-subtitle>Mechanic</ion-card-subtitle>
      <ion-card-title><b>Let's sign you in.</b></ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-card>

        <form [formGroup]="credentials">
          <ion-radio-group formControlName="type"> <!-- Connect the radio group to the form control -->
            <ion-item>
              <ion-label>Driver</ion-label>
              <ion-radio slot="end" value="Driver"></ion-radio> <!-- Set the value to 'Driver' -->
            </ion-item>

            <ion-item>
              <ion-label>Mechanic</ion-label>
              <ion-radio slot="end" value="Mechanic"></ion-radio> <!-- Set the value to 'Mechanic' -->
            </ion-item>
          </ion-radio-group>

          <ion-item lines="full">
            <ion-label position="floating">
              <ion-icon name="mail-open-sharp"></ion-icon> Email</ion-label>
            <ion-input type="email" formControlName="email" required [(ngModel)]="form.email" name="email">
            </ion-input>
          </ion-item>


          <ion-item lines="full">
            <ion-label position="floating">
              <ion-icon name="call"></ion-icon> Phone</ion-label>
            <ion-input type="text" formControlName="phone" required [(ngModel)]="form.phone" name="phone">
            </ion-input>
          </ion-item>

          <ion-item lines="full">
            <ion-label position="floating">
              <ion-icon name="call"></ion-icon> name</ion-label>
            <ion-input type="text" formControlName="name" required [(ngModel)]="form.name" name="name">
            </ion-input>
          </ion-item>

          <ng-container
            *ngIf="(credentials.get('email')?.hasError('required')) && (credentials.get('email')?.dirty || credentials.get('email')?.touched)">
            <div class="error-message">
              Email is required
            </div>
          </ng-container>
          <ng-container
            *ngIf="(credentials.get('email')?.hasError('email')) && (credentials.get('email')?.dirty || credentials.get('email')?.touched)">
            <div class="error-message">
              Please enter a valid email
            </div>
          </ng-container>

          <ion-item lines="full">
            <ion-label position="floating"><ion-icon name="lock-closed-sharp"></ion-icon> Password</ion-label>
            <ion-input type="password" formControlName="password" required [(ngModel)]="form.password" name="password"></ion-input>
          </ion-item>

          <ng-container
            *ngIf="(credentials.get('password')?.hasError('required')) && (credentials.get('password')?.dirty || credentials.get('password')?.touched)">
            <div class="error-message">
              Password is required
            </div>
          </ng-container>
          <ion-row>
            <ion-col>
              <ion-button type="submit" color="primary" expand="block" shape="round" (click)="register()">Sign
                In</ion-button>
              <a [routerLink]="['/login']" class="small-text">Login?</a>
            </ion-col>
          </ion-row>
        </form>
      </ion-card>

    </ion-card-content>
  </ion-card>
</ion-content>
